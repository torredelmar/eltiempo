<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="utf-8"/>
<title>Pron√≥stico Completo - Torre del Mar</title><meta content="https://torredelmar.github.io/eltiempo/index.html" property="og:url"/><meta content="website" property="og:type"/><meta content="800" property="og:image:height"/><meta content="1200" property="og:image:width"/><meta content="image/png" property="og:image:type"/><meta content="https://torredelmar.github.io/eltiempo/eltiempoentorredelmar.jpg" property="og:image"/><meta content="Consulta el pron√≥stico actualizado del tiempo en Torre del Mar, M√°laga." property="og:description"/><meta content="El Tiempo en Torre del Mar" property="og:title"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<!-- Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-21PTKRB496"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-21PTKRB496');
  </script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      color: #000;
      background: #f0f0f0;
    }
    nav {
      background: #004466;
      padding: 10px;
      text-align: center;
    }
    nav a {
      color: #fff;
      margin: 0 15px;
      text-decoration: none;
      font-weight: bold;
    }
    section {
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    footer {
      margin-top: 50px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      text-align: center;
    }
    /* Estilos mar√≠timos */
    .section {
      background-color: #fff;
      margin: 1rem auto;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      max-width: 600px;
    }
    .section h2 {
      color: #0077b6;
    }
    .item {
      display: flex;
      align-items: center;
      margin-bottom: 0.6rem;
    }
    .item img {
      width: 24px;
      margin-right: 0.5rem;
    }
    .label {
      font-weight: bold;
      margin-right: 0.3rem;
    }
    .recomendacion {
      margin-top: 0.8rem;
      padding: 0.8rem;
      border-radius: 8px;
      font-weight: bold;
      text-align: center;
    }
    .ok { background-color: #d4edda; color: #155724; }
    .warning { background-color: #fff3cd; color: #856404; }
    .danger { background-color: #f8d7da; color: #721c24; }
    canvas {
      background: rgba(255,255,255,0.9);
      border-radius: 10px;
      margin: 40px auto;
      max-width: 90%;
      display: block;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
  
    .weather-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin: 30px auto;
      max-width: 1200px;
      background-color: rgba(0,0,0,0.4);
      border-radius: 10px;
      padding: 20px;
    }
    .day {
      background: rgba(255, 255, 255, 0.85);
      color: #000;
      padding: 20px;
      border-radius: 10px;
      width: 300px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .section {
      background: rgba(255, 255, 255, 0.9);
      color: #000;
      margin: 1rem auto;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      max-width: 600px;
    }
    .updated {
      text-align: center;
      font-size: 0.9rem;
      color: #fff;
      margin-top: 1rem;
    }
    .mar-centered {
      text-align: center;
      margin: 20px auto;
    }
    
    .nav-buttons {
      text-align: center;
      margin: 20px 0;
    }
    .nav-buttons button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 1rem;
      font-weight: bold;
      color: white;
      background-color: #0077b6;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .nav-buttons button:hover {
      background-color: #005f87;
    }
    </style>
</head>
<body style="background: url('https://images.unsplash.com/photo-1501973801540-537f08ccae7b?auto=format&amp;fit=crop&amp;w=1470&amp;q=80') no-repeat center center fixed; background-size: cover; color: #fff;">
<h1 style="text-align:center; font-weight:bold; color:red;">Pron√≥stico del Tiempo en Torre del Mar (3 d√≠as)</h1>
<div class="weather-container" id="weather"></div>
<canvas id="tempChart"></canvas>
<canvas id="humidityChart"></canvas>
<canvas id="windChart"></canvas>
<p style="text-align:center; font-weight:bold; color:red;">
      Imagen en directo del paseo mar√≠timo de Torre del Mar
    </p>
<p><div class="mar-centered"><iframe frameborder="0" height="360px" src="https://g2.ipcamlive.com/player/player.php?alias=5b25859df0b67" width="540px"></iframe></div></p>
<p style="text-align:center; font-weight:bold; color:blue;">
      Estado actualizado del Pantano de la Vi√±uela
    </p>
<div class="mar-centered"><a href="https://www.embalses.net/pantano-883-la-vinuela.html">
<img border="0" src="https://www.embalses.net/webmasters/gen-embalse.php?e=883" title="Embalses.net - Estado de los embalses y pantanos de Espa√±a"/>
</a></div>
<section id="maritimo">
<h1 style="text-align:center; font-weight:bold; color:red;">üåä Pron√≥stico Mar√≠timo - Torre del Mar</h1>
<div class="section" id="banistas">
<h2>üèñÔ∏è Para Ba√±istas</h2>
<div class="item"><img src="https://img.icons8.com/color/48/000000/temperature.png"/><span class="label">Agua:</span> <span id="agua"></span> ¬∞C</div>
<div class="item"><img src="https://img.icons8.com/color/48/000000/summer.png"/><span class="label">Aire:</span> <span id="aire"></span> ¬∞C</div>
<div class="item"><img src="https://img.icons8.com/color/48/000000/eye.png"/><span class="label">Visibilidad:</span> <span id="visibilidad"></span> km</div>
<div class="recomendacion" id="recoBanistas">Calculando recomendaci√≥n...</div>
</div>
<div class="section" id="navegantes">
<h2>‚õµ Para Navegantes</h2>
<div class="item"><img src="https://img.icons8.com/color/48/000000/sea-waves.png"/><span class="label">Olas:</span> <span id="olas"></span> m</div>
<div class="item"><img src="https://img.icons8.com/color/48/000000/compass.png"/><span class="label">Dir. Olas:</span> <span id="dirOlas"></span>¬∞</div>
<div class="item"><img src="https://img.icons8.com/color/48/000000/wind.png"/><span class="label">Viento:</span> <span id="viento"></span> m/s</div>
<div class="item"><img src="https://img.icons8.com/color/48/000000/compass-needle.png"/><span class="label">Dir. Viento:</span> <span id="dirViento"></span>¬∞</div>
<div class="recomendacion" id="recoNavegantes">Calculando recomendaci√≥n...</div>
</div>
<p class="updated" id="hora">Cargando pron√≥stico...</p>
</section>

<div style="text-align:center;"><a href="https://turismo.velezmalaga.es/"><img src="torredelmartodoela√±o.jpg" alt="Descripci√≥n" style="width:200px; height:auto;"></a></div>

<footer>
    Web desarrollada por <a href="https://miprochip.com" style="color:#4fc3f7;" target="_blank">miprochip.com</a>
</footer>
<!-- Script Terrestre -->
<script>
    const API_KEY = 'fd12f207030d70443a4136802259ed7f';
    const LAT = 36.7421;
    const LON = -4.0955;
    async function fetchWeather() {
      const response = await fetch(`https://api.openweathermap.org/data/3.0/onecall?lat=${LAT}&lon=${LON}&exclude=minutely,hourly,alerts&units=metric&lang=es&appid=${API_KEY}`);
      const data = await response.json();
      return data.daily.slice(0, 3);
    }
    function renderWeather(days) {
      const container = document.getElementById('weather');
      const labels = [], tempsMin = [], tempsMax = [], humidities = [], winds = [];
      days.forEach(day => {
        const date = new Date(day.dt * 1000);
        const dateStr = date.toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric', month: 'long' });
        container.innerHTML += `
          <div class="day" style="background:white;color:black;padding:10px;margin:10px;border-radius:10px;">
            <h2>${dateStr}</h2>
            <img src="https://openweathermap.org/img/wn/${day.weather[0].icon}@2x.png" alt="${day.weather[0].description}">
            <p><strong>${day.weather[0].description}</strong></p>
            <p>üå°Ô∏è Temp: ${day.temp.min}¬∞C - ${day.temp.max}¬∞C</p>
            <p>üíß Humedad: ${day.humidity}%</p>
            <p>üí® Viento: ${day.wind_speed} m/s</p>
            <p>‚òÄÔ∏è Amanecer: ${new Date(day.sunrise * 1000).toLocaleTimeString('es-ES')}</p>
            <p>üåô Atardecer: ${new Date(day.sunset * 1000).toLocaleTimeString('es-ES')}</p>
            <p>üìà Presi√≥n: ${day.pressure} hPa</p>
            <p>üå´Ô∏è Nubosidad: ${day.clouds}%</p>
            <p>üåßÔ∏è Prob. lluvia: ${day.pop * 100}%</p>
            <p>üîÜ √çndice UV: ${day.uvi}</p>
          </div>`;
        labels.push(dateStr);
        tempsMin.push(day.temp.min);
        tempsMax.push(day.temp.max);
        humidities.push(day.humidity);
        winds.push(day.wind_speed);
      });
      renderCharts(labels, tempsMin, tempsMax, humidities, winds);
    }
    function renderCharts(labels, tempsMin, tempsMax, humidities, winds) {
      const chartOptions = {
        responsive: true,
        plugins: {
          legend: { position: 'top' }
        }
      };
      new Chart(document.getElementById('tempChart'), {
        type: 'line',
        data: {
          labels: labels,
          datasets: [
            { label: 'Temp. m√≠nima (¬∞C)', data: tempsMin, borderColor: 'blue', backgroundColor: 'blue', fill: false, tension: 0.3 },
            { label: 'Temp. m√°xima (¬∞C)', data: tempsMax, borderColor: 'red', backgroundColor: 'red', fill: false, tension: 0.3 }
          ]
        },
        options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: 'Temperaturas m√≠nimas y m√°ximas' } } }
      });
      new Chart(document.getElementById('humidityChart'), {
        type: 'bar',
        data: { labels: labels, datasets: [{ label: 'Humedad (%)', data: humidities, backgroundColor: 'rgba(0, 123, 255, 0.7)' }] },
        options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: 'Humedad relativa' } } }
      });
      new Chart(document.getElementById('windChart'), {
        type: 'bar',
        data: { labels: labels, datasets: [{ label: 'Velocidad del viento (m/s)', data: winds, backgroundColor: 'rgba(40, 167, 69, 0.7)' }] },
        options: { ...chartOptions, plugins: { ...chartOptions.plugins, title: { display: true, text: 'Velocidad del viento' } } }
      });
    }
    fetchWeather().then(renderWeather).catch(error => {
      document.getElementById('weather').innerHTML = "<p>Error al cargar datos meteorol√≥gicos.</p>";
      console.error(error);
    });
  </script>
<!-- Script Mar√≠timo -->
<script>
    const apiKey = "c2853b32-422f-11f0-9ea7-0242ac130006-c2853b8c-422f-11f0-9ea7-0242ac130006";
    const lat = 36.7433;
    const lng = -4.0996;
    function cargarPronostico() {
      fetch(`https://api.stormglass.io/v2/weather/point?lat=${lat}&lng=${lng}&params=waterTemperature,airTemperature,waveHeight,waveDirection,windSpeed,windDirection,visibility&source=noaa`, {
        headers: { 'Authorization': apiKey }
      })
      .then(response => response.json())
      .then(data => {
        const hora = data.hours[0];
        document.getElementById("agua").innerText = hora.waterTemperature.noaa;
        document.getElementById("aire").innerText = hora.airTemperature.noaa;
        document.getElementById("visibilidad").innerText = hora.visibility.noaa;
        document.getElementById("olas").innerText = hora.waveHeight.noaa;
        document.getElementById("dirOlas").innerText = hora.waveDirection.noaa;
        document.getElementById("viento").innerText = hora.windSpeed.noaa;
        document.getElementById("dirViento").innerText = hora.windDirection.noaa;
        document.getElementById("hora").innerText = `Actualizado: ${new Date(hora.time).toLocaleString()}`;
        const recoBanistas = document.getElementById("recoBanistas");
        if (hora.waterTemperature.noaa >= 20 && hora.visibility.noaa >= 2) {
          recoBanistas.textContent = "‚úÖ Apto para el ba√±o.";
          recoBanistas.className = "recomendacion ok";
        } else if (hora.waterTemperature.noaa >= 18) {
          recoBanistas.textContent = "‚ö†Ô∏è Precauci√≥n: agua algo fr√≠a o visibilidad baja.";
          recoBanistas.className = "recomendacion warning";
        } else {
          recoBanistas.textContent = "üö´ No recomendable para ba√±istas.";
          recoBanistas.className = "recomendacion danger";
        }
        const recoNavegantes = document.getElementById("recoNavegantes");
        if (hora.waveHeight.noaa < 1.5 && hora.windSpeed.noaa < 10 && hora.visibility.noaa >= 2) {
          recoNavegantes.textContent = "‚úÖ Buenas condiciones para navegar.";
          recoNavegantes.className = "recomendacion ok";
        } else if (hora.waveHeight.noaa < 2.5 && hora.windSpeed.noaa < 15) {
          recoNavegantes.textContent = "‚ö†Ô∏è Precauci√≥n para navegaci√≥n.";
          recoNavegantes.className = "recomendacion warning";
        } else {
          recoNavegantes.textContent = "üö´ No recomendable para navegaci√≥n.";
          recoNavegantes.className = "recomendacion danger";
        }
      })
      .catch(err => {
        console.error(err);
        document.getElementById("hora").innerText = "‚ùå No se pudieron cargar los datos.";
        document.getElementById("recoBanistas").textContent = "Sin datos.";
        document.getElementById("recoNavegantes").textContent = "Sin datos.";
      });
    }
    cargarPronostico();
  </script>
<script>
function scrollToSection(id) {
  const section = document.getElementById(id);
  if (section) {
    section.scrollIntoView({ behavior: 'smooth' });
  }
}
</script></body>
</html>
